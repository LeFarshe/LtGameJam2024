[gd_scene load_steps=3 format=3 uid="uid://dwjfrdmnn1m84"]

[ext_resource type="Theme" uid="uid://c6g8bwrd6ycst" path="res://DefaultTheme.tres" id="2_31gqt"]

[sub_resource type="GDScript" id="GDScript_1qswr"]
script/source = "extends Node2D

@export var jokeTitle: String
@export var jokePrice: int

@onready var joke_type = $div/JokeType
@onready var joke_price = $div/JokePrice
@onready var div = $div

const NOTE = preload(\"res://Scene/JokeSelection/Note.tscn\")
const noteYOffset = -2

var jokeCount = 0
const jokePileCap = 10

# Called when the node enters the scene tree for the first time.
func _ready():
	add_child(getNote(jokeCount))
	joke_type.text = jokeTitle
	joke_type.rotation = randf_range(-0.2, 0.2)
	if jokePrice == 0:
		joke_price.text = \"free\"
	else:
		joke_price.text = str(jokePrice)+\" REP\"
	
	for a in range(20):
		addJoke()

func addJoke():
	jokeCount += 1
	if jokeCount < jokePileCap:
		add_child(getNote(jokeCount))
		div.move_local_y(noteYOffset)

func removeJoke():
	if jokeCount == 0:
		return
	jokeCount -= 1
	if jokeCount < jokePileCap:
		div.move_local_y(-noteYOffset)
		remove_child(get_child(get_child_count()-1))

func getNote(noteInList):
	var note = NOTE.instantiate()
	note.move_local_y(noteInList * noteYOffset)
	return note
"

[node name="JokeSelect" type="Node2D"]
script = SubResource("GDScript_1qswr")
jokeTitle = "Sarcasm"
jokePrice = 200

[node name="div" type="Node2D" parent="."]
z_index = 1
metadata/_edit_use_anchors_ = true

[node name="JokeType" type="Label" parent="div"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -8.5
offset_right = 20.0
offset_bottom = 8.5
grow_horizontal = 2
grow_vertical = 2
pivot_offset = Vector2(21, 9.5)
theme = ExtResource("2_31gqt")
theme_override_colors/font_color = Color(0, 0, 0, 1)

[node name="JokePrice" type="Label" parent="div"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -18.0
offset_top = -27.0
offset_right = 22.0
offset_bottom = -10.0
grow_horizontal = 2
grow_vertical = 2
rotation = 0.030534
pivot_offset = Vector2(19, 9.5)
theme = ExtResource("2_31gqt")
theme_override_colors/font_color = Color(0.380392, 0, 0, 1)
theme_override_font_sizes/font_size = 8
horizontal_alignment = 2
